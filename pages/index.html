<!DOCTYPE html>
<html>
<head>

  <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="./pages/style.css">
<script src="https://kit.fontawesome.com/da6cecf1d1.js" crossorigin="anonymous"></script>
</head>
<body>

<script>
  function fardFunc(id) {
    var url = "./fard/"
var xhr = new XMLHttpRequest();
xhr.open("POST", url+id, true);
xhr.send();
}
</script>

<script>
  function browserFard(soundFile) {
    cleanText = soundFile.replace(/\"/g, "");
      var basePath = "/data/snd/";
    var path = basePath.concat(cleanText);
  var meme = new Audio(path); 
    meme.play();
}

  function reFard() {
    var url = "./shutdown";
var xhr = new XMLHttpRequest();
xhr.open("POST", url, true);
xhr.send();
  }

</script>

<div class="wrapper">
{{range .}}
<div class="container">
  <img src="/data/img/{{.Img}}" alt="poop" style="width:100%">
    <button class="btn" onclick="fardFunc({{.ID}})">{{.Title}}</button>

<button class="btn2" onclick="browserFard(`{{.SoundFile}}`)"><i class="fa-solid fa-headphones"></i></button>
</div>



<script>
</script>

    {{end}}

</div>

    <h1>Upload new meme</h1>
<button class="btn" onclick="window.location.href =`./pages/newmemeInstruct.html`;">Upload new meme!</button>
<button class="btn" onclick="reFard()">Restart server (caution!)</button>
<button class="btn" onclick="location.reload()">Refresh page</button>
</body>
</html>
